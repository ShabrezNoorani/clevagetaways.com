<style>
  /* 1. Container Layout */
  #review-widget { 
    max-width: 600px; 
    margin: 0 auto; 
    text-align: center; 
    font-family: 'Montserrat', sans-serif; 
    padding: 15px; /* Slightly reduced padding */
  }

  /* 2. Star Styling - The "No-Wrap" Guarantee */
  .star-rating { 
    display: flex;             /* Uses flexible layout */
    justify-content: center;   /* Centers the stars */
    flex-wrap: nowrap;         /* FORCES single line */
    gap: 2px;                  /* Tiny space between stars */
    margin: 20px 0; 
  }
  
  .star { 
    /* Responsive Size: Stars take up 15% of screen width on mobile, 
       but never get bigger than 60px on desktop */
    font-size: clamp(40px, 13vw, 65px); 
    color: #e0e0e0; 
    cursor: pointer; 
    line-height: 1; 
    transition: color 0.2s; 
  }
  
  .star:hover, .star.selected { color: #FFD700; } 

  /* 3. The Hidden Form Section */
  #feedback-form-section {
    display: none; 
    background: #fff;
    padding: 20px;
    border: 1px solid #eee;
    border-radius: 8px;
    margin-top: 20px;
    text-align: left; 
  }
  
  #feedback-form-section h3 { 
    margin-top: 0; 
    color: #333; 
    text-align: center;
  }
</style>

<div id="review-widget">

  <div id="stars-section">
    <h3>How was your tour today?</h3>
    
    <div style="background-color: #f0f8ff; padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 1px solid #d1e7fd;">
      <p style="color:#333; margin: 0; font-size: 15px; line-height: 1.5;">
        <strong>Support your guide!</strong> ðŸŽ“<br>
        Many of our guides are students working hard to fund their studies. Your 5-star review helps them win our <strong>"Guide of the Month"</strong> award and bonuses!
      </p>
    </div>
    
    <div class="star-rating">
      <span class="star" onclick="handleRate(1)">â˜…</span>
      <span class="star" onclick="handleRate(2)">â˜…</span>
      <span class="star" onclick="handleRate(3)">â˜…</span>
      <span class="star" onclick="handleRate(4)">â˜…</span>
      <span class="star" onclick="handleRate(5)">â˜…</span>
    </div>
    <p style="color:#666; font-size: 14px;">Tap a star to rate.</p>
  </div>

  <div id="feedback-form-section">
    <h3>We are sorry to hear that.</h3>
    <p style="text-align:center; margin-bottom:20px;">Please tell us what went wrong so we can fix it.</p>
    
    [contact-form-7 id="3a6bdd2" title="Review Feedback Form"]

  </div>

</div>

<script>
  function handleRate(stars) {
    // 1. Highlight Stars
    var allStars = document.querySelectorAll('.star');
    allStars.forEach(function(s, index) {
      if (index < stars) s.classList.add('selected');
      else s.classList.remove('selected');
    });

    // 2. Logic
    setTimeout(function() {
      if (stars >= 4) {
        // Redirect to TripAdvisor (4 or 5 stars)
        window.location.href = "https://www.tripadvisor.com/UserReviewEdit-g187147-d34037195-Eiffel_Tower_Dedicated_Reserved_Access_Top_or_2nd_floor_by_stairs-Paris_Ile_de_France.html";
      } else {
        // Show Form (1, 2, or 3 stars)
        document.getElementById('stars-section').style.display = 'none';
        document.getElementById('feedback-form-section').style.display = 'block';
      }
    }, 400);
  }
</script>